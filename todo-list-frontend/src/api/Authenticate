const Authenticate = async ({emailVal, passVal}) => {
    let token = localStorage.getItem('token')
    let isRegistration = false
    const apiBase = '/'

    try {
        let data
        if (isRegistration) {
            // register an account
            const response = await fetch(apiBase + 'auth/register', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ username: emailVal, password: passVal })
            })
            data = await response.json()
        } else {
            // login an account
            const response = await fetch(apiBase + 'auth/login', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ username: emailVal, password: passVal })
            })
            data = await response.json()
        }

        if (data.token) {
            token = data.token
            localStorage.setItem('token', token)

            // authenicating into loading

            // fetch todos
            
        } else {
            throw Error('‚ùå Failed to authenticate...')
        }
    } catch (err) {
        console.log(err.message)
    }
}

export default Authenticate